-- vim: ts=2 sw=4 noet ai cindent syntax=lua

conky.config = {
    alignment = 'top_right',
    background = false,
    border_width = 1,
    cpu_avg_samples = 3,
    default_color = 'green',
    default_outline_color = 'white',
    default_shade_color = 'white',
    draw_borders = false,
    draw_graph_borders = true,
    draw_outline = false,
    draw_shades = false,
    double_buffer = true,
    use_xft = true,
    font = 'DejaVu Sans Mono:size=10',
    gap_x = 5,
    gap_y = 5,
    minimum_height = 5,
    minimum_width = 5,
    net_avg_samples = 3,
    no_buffers = true,
    out_to_console = false,
    out_to_stderr = false,
    extra_newline = false,
    own_window = true,
    own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',
    own_window_class = 'Conky',
    own_window_type = 'desktop',
    own_window_transparent = true,
    own_window_argb_visual = true,
    stippled_borders = 0,
    update_interval = 1.0,
    uppercase = false,
    use_spacer = 'none',
    show_graph_scale = false,
    show_graph_range = false,
    color1 = 'white',
    color2 = 'grey'
}

conky.text = [[
${offset 5}${color1}desktop: ${color}${desktop_name}
${offset 5}${color1}hostname: ${color}${nodename}
${offset 5}${color1}kernel: ${color}${kernel}
${offset 5}${color1}uptime: ${color}${uptime}
${if_existing /proc/net/route wlp3s0}${offset 5}${color1}SSID: ${color}${wireless_essid wlp3s0}
${hr}${else}${hr}${endif}
${color1}system stats:
${offset 5}${color1}freqs:${color} ${freq 1} - ${freq 2} - ${freq 3} - ${freq 4} Mhz
${offset 6}${color1}RAM:${color} ${mem}/${memmax} - ${memperc}% ${membar 3}
${hr}
${offset 5}${color1}CPU thr0:${color} ${cpu cpu1}%${alignr}${cpugraph cpu1 13,180}
${offset 5}${color1}CPU thr1:${color} ${cpu cpu2}%${alignr}${cpugraph cpu2 13,180}
${offset 5}${color1}CPU thr2:${color} ${cpu cpu3}%${alignr}${cpugraph cpu3 13,180}
${offset 5}${color1}CPU thr3:${color} ${cpu cpu4}%${alignr}${cpugraph cpu4 13,180}
${offset 5}${color1}/dev/sda write:${color} ${diskio_write sda}${alignr}${diskiograph_write sda 13,100}
${offset 5}${color1}/dev/sda  read:${color} ${diskio_read sda}${alignr}${diskiograph_read sda 13,100}
${offset 5}${color1}processes: ${color}${processes}     ${color1}running:${alignr}${color}P${running_processes} - T${running_threads}
${hr}
${color1}filesystem:
${offset 5}${color1}sda: ${color}${fs_used /}/${fs_size /}${alignr}${fs_bar 6,120 /}
${offset 5}${color1}swp: ${color}${swap}/${swapmax}${alignr}${swapbar 6,120}
${hr}
${color1}name              PID     CPU%   MEM%
${offset 5}${color1}${top name 1} ${top pid 1} ${color}${top cpu 1} ${top mem 1}
${offset 5}${color1}${top name 2} ${top pid 2} ${color}${top cpu 2} ${top mem 2}
${offset 5}${color1}${top name 3} ${top pid 3} ${color}${top cpu 3} ${top mem 3}
${offset 5}${color1}${top name 4} ${top pid 4} ${color}${top cpu 4} ${top mem 4}
${offset 5}${color1}${top name 5} ${top pid 5} ${color}${top cpu 5} ${top mem 5}
${offset 5}${color1}${top name 6} ${top pid 6} ${color}${top cpu 6} ${top mem 6}
${offset 5}${color1}${top name 7} ${top pid 7} ${color}${top cpu 7} ${top mem 7}
${offset 5}${color1}${top name 8} ${top pid 8} ${color}${top cpu 8} ${top mem 8}
${hr}
${color1}inbound: ${color}${tcp_portmon 1 32767 count} ${color1}outbound: ${color}${tcp_portmon 32768 61000 count} ${alignr}${color1}total: ${color}${tcp_portmon 1 65535 count}
${hr}
${color2}${texeci 10 netstat -ptn 2>/dev/null | tail -n +3 | grep "ESTABLISHED" | grep -vE "chrome|firefox" | awk '{split($5,a,":"); printf("%-12s  %-15s %7s\n", substr($7,0,12), substr(a[1],0,15), substr(a[2],0,5))}' | sort -u | head -30}
]]
